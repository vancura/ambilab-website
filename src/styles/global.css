@import 'tailwindcss';

@custom-variant dark (&:where(.dark, .dark *));

@theme {
    --font-family-sans: 'Innovator Grotesk', system-ui, sans-serif;
    --font-family-mono: 'PragmataPro Mono', ui-monospace, 'SF Mono', Menlo, Monaco, Consolas, monospace;

    /* Debug colors */
    --color-debug: #f0f;

    /* Semantic Colors - Page & Surface Backgrounds */
    --color-page-bg: theme('colors.gray.200');
    --color-page-bg-dark: theme('colors.zinc.900');
    --color-page-bg-muted: theme('colors.gray.50');
    --color-page-bg-muted-dark: theme('colors.gray.950');

    --color-surface: theme('colors.white');
    --color-surface-dark: theme('colors.zinc.600');
    --color-surface-hover: theme('colors.gray.100');
    --color-surface-hover-dark: theme('colors.gray.800');
    --color-surface-code: theme('colors.gray.100');
    --color-surface-code-dark: theme('colors.gray.800');

    /* Semantic Colors - Borders */
    --color-border-default: theme('colors.gray.300');
    --color-border-default-dark: theme('colors.gray.800');
    --color-border-medium: theme('colors.gray.300');
    --color-border-medium-dark: theme('colors.gray.700');
    --color-border-subtle: theme('colors.gray.400');
    --color-border-subtle-dark: theme('colors.gray.600');

    /* Semantic Colors - Text */
    --color-text-primary: theme('colors.gray.900');
    --color-text-primary-dark: theme('colors.gray.100');
    --color-text-secondary: theme('colors.gray.700');
    --color-text-secondary-dark: theme('colors.gray.300');
    --color-text-muted: theme('colors.gray.600');
    --color-text-muted-dark: theme('colors.gray.400');

    /* Semantic Colors - Links */
    --color-link: theme('colors.blue.600');
    --color-link-hover: theme('colors.blue.700');
    --color-link-dark: theme('colors.blue.400');
    --color-link-hover-dark: theme('colors.blue.300');
    --color-link-active: theme('colors.black');
    --color-link-active-dark: theme('colors.white');

    /* Semantic Colors - Buttons */
    --color-button-primary: theme('colors.blue.600');
    --color-button-primary-hover: theme('colors.blue.700');
    --color-button-primary-text: theme('colors.white');
    --color-button-primary-dark: theme('colors.blue.500');
    --color-button-primary-hover-dark: theme('colors.blue.400');
    --color-button-primary-text-dark: theme('colors.white');

    /* Semantic Colors - Accents */
    --color-info-bg: theme('colors.blue.50');
    --color-info-bg-dark: theme('colors.blue.950');
    --color-info-border: theme('colors.blue.500');
    --color-warning-bg: theme('colors.yellow.50');
    --color-warning-bg-dark: theme('colors.yellow.950');
    --color-warning-border: theme('colors.yellow.200');
    --color-warning-border-dark: theme('colors.yellow.900');
    --color-warning-text: theme('colors.yellow.600');
    --color-warning-text-dark: theme('colors.yellow.400');
    --color-warning-heading: theme('colors.yellow.800');
    --color-warning-heading-dark: theme('colors.yellow.200');
    --color-warning-highlight: theme('colors.yellow.200');
    --color-warning-highlight-dark: theme('colors.yellow.800');
    --color-success-text: theme('colors.green.600');
    --color-success-text-dark: theme('colors.green.400');
    --color-error-text: theme('colors.red.600');
    --color-error-text-dark: theme('colors.red.400');

    /* Semantic Colors - Tags/Badges */
    --color-tag-bg: theme('colors.blue.100');
    --color-tag-bg-dark: theme('colors.blue.900');
    --color-tag-text: theme('colors.blue.800');
    --color-tag-text-dark: theme('colors.blue.200');

    /* Semantic Colors - Tables */
    --color-table-header-bg: theme('colors.gray.50');
    --color-table-header-bg-dark: theme('colors.gray.900');
    --color-table-header-border: theme('colors.gray.300');
    --color-table-header-border-dark: theme('colors.gray.700');
    --color-table-border: theme('colors.gray.200');
    --color-table-border-dark: theme('colors.gray.800');

    /* Semantic Colors - Misc */
    --color-anchor: theme('colors.gray.400');
    --color-anchor-dark: theme('colors.gray.600');

    /* Semantic Colors - Selection */
    --color-selection-bg: theme('colors.lime.300');
    --color-selection-text: theme('colors.lime.800');
    --color-selection-bg-dark: theme('colors.lime.700');
    --color-selection-text-dark: theme('colors.lime.100');
}

/* Dot Background Utilities */
@layer utilities {
    .bg-dots {
        background-image: radial-gradient(circle, rgba(0, 0, 0, 0.04) 1px, transparent 1px);
        background-size: 8px 8px;
        background-position: 0 0;
    }

    .dark .bg-dots {
        background-image: radial-gradient(circle, rgba(255, 255, 255, 0.04) 1px, transparent 1px);
    }
}

:root {
    color-scheme: light dark;
}

.dark {
    color-scheme: dark;
}

html {
    /*noinspection CssNoGenericFontName*/
    font-family: var(--font-family-sans);

    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

body {
    min-height: 100vh;
    text-rendering: optimizeLegibility;
    font-variant-ligatures: contextual common-ligatures;

    /**
     * OpenType font features for Innovator Grotesk.
     *
     * Enabled features (1):
     * - kern: Kerning for improved letter spacing
     * - liga: Standard ligatures (fi, fl, etc.)
     * - clig: Contextual ligatures
     * - dlig: Discretionary ligatures
     * - zero: Slashed zero for clarity
     * - tnum: Tabular numbers for alignment in tables
     * - cv01, cv06, cv08, cv10, cv13: Character variants for improved readability
     *
     * Disabled features (0):
     * - calt: Contextual alternates (disabled for consistency)
     * - Other cv/ss features: Not used or not supported by the font
     *
     * Note: Unsupported features are silently ignored by browsers.
     */
    font-feature-settings:
        'kern' 1,
        'liga' 1,
        'clig' 1,
        'dlig' 1,
        'calt' 0,
        'zero' 1,
        'tnum' 1,
        'cv01' 1,
        'cv02' 0,
        'cv03' 0,
        'cv04' 0,
        'cv05' 0,
        'cv06' 1,
        'cv07' 0,
        'cv08' 1,
        'cv09' 0,
        'cv10' 1,
        'cv11' 0,
        'cv12' 0,
        'cv13' 1,
        'cv14' 0,
        'cv15' 0,
        'ss01' 0,
        'ss02' 0,
        'ss03' 0;
}

/* Focus styles for accessibility */
*:focus-visible {
    @apply outline-4 outline-offset-2 outline-blue-600;
}

/* Smooth scroll behavior (respects prefers-reduced-motion) */
@media (prefers-reduced-motion: no-preference) {
    html {
        scroll-behavior: smooth;
    }
}

/* View Transitions (gradient wipe animation) */
@media (prefers-reduced-motion: no-preference) {
    ::view-transition-old(root),
    ::view-transition-new(root) {
        animation-duration: 300ms;
        animation-timing-function: cubic-bezier(0.27, 0, 0.51, 1);
    }
}

/* Reduced motion: instant transitions with no mask effects */
@media (prefers-reduced-motion: reduce) {
    ::view-transition-old(root),
    ::view-transition-new(root) {
        animation-duration: 0.001s;
        animation-name: none;
        mask-image: none;
    }
}

/* Selection colors */
::selection {
    background-color: var(--color-selection-bg);
    color: var(--color-selection-text);
}

.dark ::selection {
    background-color: var(--color-selection-bg-dark);
    color: var(--color-selection-text-dark);
}

/* Custom scrollbar */
/* Firefox scrollbar styles */
html {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.gray.400') theme('colors.gray.100');
}

.dark {
    scrollbar-color: theme('colors.gray.600') theme('colors.gray.900');
}

/* WebKit scrollbar styles */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: theme('colors.gray.100');
}

.dark ::-webkit-scrollbar-track {
    background: theme('colors.gray.900');
}

::-webkit-scrollbar-thumb {
    background: theme('colors.gray.400');
    border-radius: 5px;
}

.dark ::-webkit-scrollbar-thumb {
    background: theme('colors.gray.600');
}

::-webkit-scrollbar-thumb:hover {
    background: theme('colors.gray.500');
}

.dark ::-webkit-scrollbar-thumb:hover {
    background: theme('colors.gray.500');
}

.expressive-code {
    @apply -mx-6 pb-4;
}

/* Print styles */
@media print {
    * {
        background: transparent !important;
        color: black !important;
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]::after {
        content: ' (' attr(href) ')';
    }

    abbr[title]::after {
        content: ' (' attr(title) ')';
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group;
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}
